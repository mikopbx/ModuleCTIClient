"use strict";

/*
 * Copyright (C) MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Nikolay Beketov, 11 2018
 *
 */
var moduleCTIClient = {
  $wsToggle: $('#web-service-mode-toggle'),
  $wsToggleRadio: $('#module-cti-client-form .web-service-radio'),
  $statusToggle: $('#module-status-toggle'),
  $callerIdSetupToggle: $('#setup-caller-id-toggle'),
  $callerIdTransliterationToggleBlock: $('#transliterate-caller-id-toggle-block'),
  $formObj: $('#module-cti-client-form'),
  $moduleStatus: $('#status'),
  $debugToggle: $('#debug-mode-toggle'),
  $autoSettingsToggle: $('#auto-settings-mode-toggle'),
  $onlyAutoSettingsVisible: $('#module-cti-client-form .only-auto-settings'),
  $onlyManualSettingsVisible: $('#module-cti-client-form .only-manual-settings'),
  $wsOnlyFields: $('.ws-only'),
  $dirrtyField: $('#dirrty'),
  $sslModeSelect: $('.server1c_scheme select'),
  $debugTab: $('#module-cti-client-tabs .item[data-tab="debug"]'),
  validateRules: {
    server1chost: {
      identifier: 'server1chost',
      rules: [{
        type: 'emptyCustomRule',
        prompt: globalTranslate.mod_cti_ValidateServer1CHostEmpty
      }]
    },
    server1cport: {
      identifier: 'server1cport',
      rules: [{
        type: 'wrongPortCustomRule',
        prompt: globalTranslate.mod_cti_ValidateServer1CPortRange
      }]
    },
    database: {
      identifier: 'database',
      rules: [{
        type: 'emptyCustomRule',
        prompt: globalTranslate.mod_cti_ValidatePubName
      }]
    }
  },
  initialize: function initialize() {
    $('#module-cti-client-form .item').tab();

    if (moduleCTIClient.$debugToggle.checkbox('is unchecked')) {
      moduleCTIClient.$debugTab.hide();
    }

    moduleCTIClient.$debugToggle.checkbox({
      onChecked: function onChecked() {
        moduleCTIClient.$debugTab.show();
      },
      onUnchecked: function onUnchecked() {
        moduleCTIClient.$debugTab.hide();
      }
    });
    moduleCTIClient.$callerIdSetupToggle.checkbox({
      onChange: moduleCTIClient.setCallerIdToggle
    });

    if (moduleCTIClient.$autoSettingsToggle.checkbox('is checked')) {
      moduleCTIClient.$onlyManualSettingsVisible.hide();
    } else {
      moduleCTIClient.$onlyAutoSettingsVisible.hide();
    }

    moduleCTIClient.$autoSettingsToggle.checkbox({
      onChecked: function onChecked() {
        moduleCTIClient.$onlyAutoSettingsVisible.show();
        moduleCTIClient.$onlyManualSettingsVisible.hide();
        moduleCTIClient.$dirrtyField.val(Math.random());
        moduleCTIClient.$dirrtyField.trigger('change');
        Form.validateRules = {};
      },
      onUnchecked: function onUnchecked() {
        moduleCTIClient.$dirrtyField.val(Math.random());
        moduleCTIClient.$dirrtyField.trigger('change');
        moduleCTIClient.$onlyAutoSettingsVisible.hide();
        moduleCTIClient.$onlyManualSettingsVisible.show();
        Form.validateRules = moduleCTIClient.validateRules;
      }
    });

    if (moduleCTIClient.$wsToggle.checkbox('is checked')) {
      moduleCTIClient.enableWsFields();
    }

    moduleCTIClient.$wsToggleRadio.checkbox({
      onChecked: function onChecked() {
        moduleCTIClient.$dirrtyField.val(Math.random());
        moduleCTIClient.$dirrtyField.trigger('change');

        if (moduleCTIClient.$wsToggle.checkbox('is checked')) {
          moduleCTIClient.enableWsFields();
        } else {
          moduleCTIClient.disableWsFields();
        }
      }
    });
    moduleCTIClient.$sslModeSelect.dropdown({
      onChange: moduleCTIClient.cbSslModeOnChange
    });
    moduleCTIClient.initializeForm();
    moduleCTIClient.checkStatusToggle();
    moduleCTIClient.setCallerIdToggle();
    window.addEventListener('ModuleStatusChanged', moduleCTIClient.checkStatusToggle);
  },

  /**
   * Проверка состояния модуля
   */
  checkStatusToggle: function checkStatusToggle() {
    if (moduleCTIClient.$statusToggle.checkbox('is checked')) {
      $('.disability').removeClass('disabled');
      moduleCTIClient.$moduleStatus.show();
      moduleCTIClientConnectionCheckWorker.initialize();
    } else {
      moduleCTIClient.$moduleStatus.hide();
      moduleCTIClient.$moduleStatus.hide();
      $('.disability').addClass('disabled');
      $('.message.ajax').remove();
    }
  },

  /**
   * Переключатель установки CallerID из 1С
   * Прячет или показывает статус транслитерации
   */
  setCallerIdToggle: function setCallerIdToggle() {
    if (moduleCTIClient.$callerIdSetupToggle.checkbox('is checked')) {
      moduleCTIClient.$callerIdTransliterationToggleBlock.show();
    } else {
      moduleCTIClient.$callerIdTransliterationToggleBlock.hide();
    }
  },

  /**
   * Включение режима работы через WS
   */
  enableWsFields: function enableWsFields() {
    moduleCTIClient.$wsOnlyFields.removeClass('disabled');
  },

  /**
   * Выключение режима работы через WS
   */
  disableWsFields: function disableWsFields() {
    moduleCTIClient.$wsOnlyFields.addClass('disabled');
  },

  /**
   * При изменении SSL режима
   * @param value
   * @param text
   * @param $choice
   */
  cbSslModeOnChange: function cbSslModeOnChange(value, text, $choice) {
    var port = moduleCTIClient.$formObj.form('get value', 'server1cport');

    if (value === 'http' && port === '443') {
      moduleCTIClient.$formObj.form('set value', 'server1cport', 80);
    }

    if (value === 'https' && port === '80') {
      moduleCTIClient.$formObj.form('set value', 'server1cport', 443);
    }
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = moduleCTIClient.$formObj.form('get values');
    return result;
  },
  cbAfterSendForm: function cbAfterSendForm() {
    moduleCTIClient.initialize();
  },
  initializeForm: function initializeForm() {
    Form.$formObj = moduleCTIClient.$formObj;
    Form.url = "".concat(globalRootUrl, "module-c-t-i-client/save");
    Form.validateRules = moduleCTIClient.validateRules;
    Form.cbBeforeSendForm = moduleCTIClient.cbBeforeSendForm;
    Form.cbAfterSendForm = moduleCTIClient.cbAfterSendForm;
    Form.initialize();
  }
};

$.fn.form.settings.rules.emptyCustomRule = function (value) {
  if (moduleCTIClient.$autoSettingsToggle.checkbox('is unchecked') && moduleCTIClient.$wsToggle.checkbox('is checked') && value === '') {
    return false;
  }

  return true;
};

$.fn.form.settings.rules.wrongPortCustomRule = function (value) {
  if (moduleCTIClient.$autoSettingsToggle.checkbox('is unchecked') && moduleCTIClient.$wsToggle.checkbox('is checked')) {
    return $.fn.form.settings.rules.integer(value, '1..65535');
  }

  return true;
};

$(document).ready(function () {
  moduleCTIClient.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUtY3RpLWNsaWVudC1pbmRleC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVDVElDbGllbnQiLCIkd3NUb2dnbGUiLCIkIiwiJHdzVG9nZ2xlUmFkaW8iLCIkc3RhdHVzVG9nZ2xlIiwiJGNhbGxlcklkU2V0dXBUb2dnbGUiLCIkY2FsbGVySWRUcmFuc2xpdGVyYXRpb25Ub2dnbGVCbG9jayIsIiRmb3JtT2JqIiwiJG1vZHVsZVN0YXR1cyIsIiRkZWJ1Z1RvZ2dsZSIsIiRhdXRvU2V0dGluZ3NUb2dnbGUiLCIkb25seUF1dG9TZXR0aW5nc1Zpc2libGUiLCIkb25seU1hbnVhbFNldHRpbmdzVmlzaWJsZSIsIiR3c09ubHlGaWVsZHMiLCIkZGlycnR5RmllbGQiLCIkc3NsTW9kZVNlbGVjdCIsIiRkZWJ1Z1RhYiIsInZhbGlkYXRlUnVsZXMiLCJzZXJ2ZXIxY2hvc3QiLCJpZGVudGlmaWVyIiwicnVsZXMiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwibW9kX2N0aV9WYWxpZGF0ZVNlcnZlcjFDSG9zdEVtcHR5Iiwic2VydmVyMWNwb3J0IiwibW9kX2N0aV9WYWxpZGF0ZVNlcnZlcjFDUG9ydFJhbmdlIiwiZGF0YWJhc2UiLCJtb2RfY3RpX1ZhbGlkYXRlUHViTmFtZSIsImluaXRpYWxpemUiLCJ0YWIiLCJjaGVja2JveCIsImhpZGUiLCJvbkNoZWNrZWQiLCJzaG93Iiwib25VbmNoZWNrZWQiLCJvbkNoYW5nZSIsInNldENhbGxlcklkVG9nZ2xlIiwidmFsIiwiTWF0aCIsInJhbmRvbSIsInRyaWdnZXIiLCJGb3JtIiwiZW5hYmxlV3NGaWVsZHMiLCJkaXNhYmxlV3NGaWVsZHMiLCJkcm9wZG93biIsImNiU3NsTW9kZU9uQ2hhbmdlIiwiaW5pdGlhbGl6ZUZvcm0iLCJjaGVja1N0YXR1c1RvZ2dsZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVDbGFzcyIsIm1vZHVsZUNUSUNsaWVudENvbm5lY3Rpb25DaGVja1dvcmtlciIsImFkZENsYXNzIiwicmVtb3ZlIiwidmFsdWUiLCJ0ZXh0IiwiJGNob2ljZSIsInBvcnQiLCJmb3JtIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldHRpbmdzIiwicmVzdWx0IiwiZGF0YSIsImNiQWZ0ZXJTZW5kRm9ybSIsInVybCIsImdsb2JhbFJvb3RVcmwiLCJmbiIsImVtcHR5Q3VzdG9tUnVsZSIsIndyb25nUG9ydEN1c3RvbVJ1bGUiLCJpbnRlZ2VyIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElBQU1BLGVBQWUsR0FBRztBQUN2QkMsRUFBQUEsU0FBUyxFQUFFQyxDQUFDLENBQUMsMEJBQUQsQ0FEVztBQUV2QkMsRUFBQUEsY0FBYyxFQUFFRCxDQUFDLENBQUMsNENBQUQsQ0FGTTtBQUd2QkUsRUFBQUEsYUFBYSxFQUFFRixDQUFDLENBQUMsdUJBQUQsQ0FITztBQUl2QkcsRUFBQUEsb0JBQW9CLEVBQUVILENBQUMsQ0FBQyx5QkFBRCxDQUpBO0FBS3ZCSSxFQUFBQSxtQ0FBbUMsRUFBRUosQ0FBQyxDQUFDLHVDQUFELENBTGY7QUFNdkJLLEVBQUFBLFFBQVEsRUFBRUwsQ0FBQyxDQUFDLHlCQUFELENBTlk7QUFPdkJNLEVBQUFBLGFBQWEsRUFBRU4sQ0FBQyxDQUFDLFNBQUQsQ0FQTztBQVF2Qk8sRUFBQUEsWUFBWSxFQUFFUCxDQUFDLENBQUMsb0JBQUQsQ0FSUTtBQVN2QlEsRUFBQUEsbUJBQW1CLEVBQUVSLENBQUMsQ0FBQyw0QkFBRCxDQVRDO0FBVXZCUyxFQUFBQSx3QkFBd0IsRUFBRVQsQ0FBQyxDQUFDLDZDQUFELENBVko7QUFXdkJVLEVBQUFBLDBCQUEwQixFQUFFVixDQUFDLENBQUMsK0NBQUQsQ0FYTjtBQVl2QlcsRUFBQUEsYUFBYSxFQUFFWCxDQUFDLENBQUMsVUFBRCxDQVpPO0FBYXZCWSxFQUFBQSxZQUFZLEVBQUVaLENBQUMsQ0FBQyxTQUFELENBYlE7QUFjdkJhLEVB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NkIsVUFBaEI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgTUlLTyBMTEMgLSBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiBVbmF1dGhvcml6ZWQgY29weWluZyBvZiB0aGlzIGZpbGUsIHZpYSBhbnkgbWVkaXVtIGlzIHN0cmljdGx5IHByb2hpYml0ZWRcbiAqIFByb3ByaWV0YXJ5IGFuZCBjb25maWRlbnRpYWxcbiAqIFdyaXR0ZW4gYnkgTmlrb2xheSBCZWtldG92LCAxMSAyMDE4XG4gKlxuICovXG5cbmNvbnN0IG1vZHVsZUNUSUNsaWVudCA9IHtcblx0JHdzVG9nZ2xlOiAkKCcjd2ViLXNlcnZpY2UtbW9kZS10b2dnbGUnKSxcblx0JHdzVG9nZ2xlUmFkaW86ICQoJyNtb2R1bGUtY3RpLWNsaWVudC1mb3JtIC53ZWItc2VydmljZS1yYWRpbycpLFxuXHQkc3RhdHVzVG9nZ2xlOiAkKCcjbW9kdWxlLXN0YXR1cy10b2dnbGUnKSxcblx0JGNhbGxlcklkU2V0dXBUb2dnbGU6ICQoJyNzZXR1cC1jYWxsZXItaWQtdG9nZ2xlJyksXG5cdCRjYWxsZXJJZFRyYW5zbGl0ZXJhdGlvblRvZ2dsZUJsb2NrOiAkKCcjdHJhbnNsaXRlcmF0ZS1jYWxsZXItaWQtdG9nZ2xlLWJsb2NrJyksXG5cdCRmb3JtT2JqOiAkKCcjbW9kdWxlLWN0aS1jbGllbnQtZm9ybScpLFxuXHQkbW9kdWxlU3RhdHVzOiAkKCcjc3RhdHVzJyksXG5cdCRkZWJ1Z1RvZ2dsZTogJCgnI2RlYnVnLW1vZGUtdG9nZ2xlJyksXG5cdCRhdXRvU2V0dGluZ3NUb2dnbGU6ICQoJyNhdXRvLXNldHRpbmdzLW1vZGUtdG9nZ2xlJyksXG5cdCRvbmx5QXV0b1NldHRpbmdzVmlzaWJsZTogJCgnI21vZHVsZS1jdGktY2xpZW50LWZvcm0gLm9ubHktYXV0by1zZXR0aW5ncycpLFxuXHQkb25seU1hbnVhbFNldHRpbmdzVmlzaWJsZTogJCgnI21vZHVsZS1jdGktY2xpZW50LWZvcm0gLm9ubHktbWFudWFsLXNldHRpbmdzJyksXG5cdCR3c09ubHlGaWVsZHM6ICQoJy53cy1vbmx5JyksXG5cdCRkaXJydHlGaWVsZDogJCgnI2RpcnJ0eScpLFxuXHQkc3NsTW9kZVNlbGVjdDogJCgnLnNlcnZlcjFjX3NjaGVtZSBzZWxlY3QnKSxcblx0JGRlYnVnVGFiOiAkKCcjbW9kdWxlLWN0aS1jbGllbnQtdGFicyAuaXRlbVtkYXRhLXRhYj1cImRlYnVnXCJdJyksXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRzZXJ2ZXIxY2hvc3Q6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdzZXJ2ZXIxY2hvc3QnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eUN1c3RvbVJ1bGUnLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZF9jdGlfVmFsaWRhdGVTZXJ2ZXIxQ0hvc3RFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRzZXJ2ZXIxY3BvcnQ6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdzZXJ2ZXIxY3BvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd3cm9uZ1BvcnRDdXN0b21SdWxlJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5tb2RfY3RpX1ZhbGlkYXRlU2VydmVyMUNQb3J0UmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0ZGF0YWJhc2U6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdkYXRhYmFzZScsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2VtcHR5Q3VzdG9tUnVsZScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubW9kX2N0aV9WYWxpZGF0ZVB1Yk5hbWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdH0sXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0JCgnI21vZHVsZS1jdGktY2xpZW50LWZvcm0gLml0ZW0nKS50YWIoKTtcblx0XHRpZiAobW9kdWxlQ1RJQ2xpZW50LiRkZWJ1Z1RvZ2dsZS5jaGVja2JveCgnaXMgdW5jaGVja2VkJykpe1xuXHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRkZWJ1Z1RhYi5oaWRlKClcblx0XHR9XG5cdFx0bW9kdWxlQ1RJQ2xpZW50LiRkZWJ1Z1RvZ2dsZVxuXHRcdFx0LmNoZWNrYm94KHtcblx0XHRcdFx0b25DaGVja2VkKCkge1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kZGVidWdUYWIuc2hvdygpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9uVW5jaGVja2VkKCkge1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kZGVidWdUYWIuaGlkZSgpXG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXG5cdFx0bW9kdWxlQ1RJQ2xpZW50LiRjYWxsZXJJZFNldHVwVG9nZ2xlXG5cdFx0XHQuY2hlY2tib3goe1xuXHRcdFx0XHRvbkNoYW5nZTogbW9kdWxlQ1RJQ2xpZW50LnNldENhbGxlcklkVG9nZ2xlXG5cdFx0XHR9KTtcblxuXG5cdFx0aWYgKG1vZHVsZUNUSUNsaWVudC4kYXV0b1NldHRpbmdzVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJykpe1xuXHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRvbmx5TWFudWFsU2V0dGluZ3NWaXNpYmxlLmhpZGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRvbmx5QXV0b1NldHRpbmdzVmlzaWJsZS5oaWRlKCk7XG5cdFx0fVxuXHRcdG1vZHVsZUNUSUNsaWVudC4kYXV0b1NldHRpbmdzVG9nZ2xlXG5cdFx0XHQuY2hlY2tib3goe1xuXHRcdFx0XHRvbkNoZWNrZWQoKSB7XG5cdFx0XHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRvbmx5QXV0b1NldHRpbmdzVmlzaWJsZS5zaG93KCk7XG5cdFx0XHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRvbmx5TWFudWFsU2V0dGluZ3NWaXNpYmxlLmhpZGUoKTtcblx0XHRcdFx0XHRtb2R1bGVDVElDbGllbnQuJGRpcnJ0eUZpZWxkLnZhbChNYXRoLnJhbmRvbSgpKTtcblx0XHRcdFx0XHRtb2R1bGVDVElDbGllbnQuJGRpcnJ0eUZpZWxkLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IHt9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRvblVuY2hlY2tlZCgpIHtcblx0XHRcdFx0XHRtb2R1bGVDVElDbGllbnQuJGRpcnJ0eUZpZWxkLnZhbChNYXRoLnJhbmRvbSgpKTtcblx0XHRcdFx0XHRtb2R1bGVDVElDbGllbnQuJGRpcnJ0eUZpZWxkLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kb25seUF1dG9TZXR0aW5nc1Zpc2libGUuaGlkZSgpO1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kb25seU1hbnVhbFNldHRpbmdzVmlzaWJsZS5zaG93KCk7XG5cdFx0XHRcdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzID0gbW9kdWxlQ1RJQ2xpZW50LnZhbGlkYXRlUnVsZXM7XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXG5cdFx0aWYgKG1vZHVsZUNUSUNsaWVudC4kd3NUb2dnbGUuY2hlY2tib3goJ2lzIGNoZWNrZWQnKSkge1xuXHRcdFx0bW9kdWxlQ1RJQ2xpZW50LmVuYWJsZVdzRmllbGRzKCk7XG5cdFx0fVxuXHRcdG1vZHVsZUNUSUNsaWVudC4kd3NUb2dnbGVSYWRpb1xuXHRcdFx0LmNoZWNrYm94KHtcblx0XHRcdFx0b25DaGVja2VkKCkge1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kZGlycnR5RmllbGQudmFsKE1hdGgucmFuZG9tKCkpO1xuXHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC4kZGlycnR5RmllbGQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRcdFx0aWYgKG1vZHVsZUNUSUNsaWVudC4kd3NUb2dnbGUuY2hlY2tib3goJ2lzIGNoZWNrZWQnKSkge1xuXHRcdFx0XHRcdFx0bW9kdWxlQ1RJQ2xpZW50LmVuYWJsZVdzRmllbGRzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG1vZHVsZUNUSUNsaWVudC5kaXNhYmxlV3NGaWVsZHMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHRtb2R1bGVDVElDbGllbnQuJHNzbE1vZGVTZWxlY3QuZHJvcGRvd24oe1xuXHRcdFx0b25DaGFuZ2U6IG1vZHVsZUNUSUNsaWVudC5jYlNzbE1vZGVPbkNoYW5nZVxuXHRcdH0pO1xuXHRcdG1vZHVsZUNUSUNsaWVudC5pbml0aWFsaXplRm9ybSgpO1xuXHRcdG1vZHVsZUNUSUNsaWVudC5jaGVja1N0YXR1c1RvZ2dsZSgpO1xuXHRcdG1vZHVsZUNUSUNsaWVudC5zZXRDYWxsZXJJZFRvZ2dsZSgpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdNb2R1bGVTdGF0dXNDaGFuZ2VkJywgbW9kdWxlQ1RJQ2xpZW50LmNoZWNrU3RhdHVzVG9nZ2xlKTtcblx0fSxcblx0LyoqXG5cdCAqINCf0YDQvtCy0LXRgNC60LAg0YHQvtGB0YLQvtGP0L3QuNGPINC80L7QtNGD0LvRj1xuXHQgKi9cblx0Y2hlY2tTdGF0dXNUb2dnbGUoKSB7XG5cdFx0aWYgKG1vZHVsZUNUSUNsaWVudC4kc3RhdHVzVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJykpIHtcblx0XHRcdCQoJy5kaXNhYmlsaXR5JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHRtb2R1bGVDVElDbGllbnQuJG1vZHVsZVN0YXR1cy5zaG93KCk7XG5cdFx0XHRtb2R1bGVDVElDbGllbnRDb25uZWN0aW9uQ2hlY2tXb3JrZXIuaW5pdGlhbGl6ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtb2R1bGVDVElDbGllbnQuJG1vZHVsZVN0YXR1cy5oaWRlKCk7XG5cdFx0XHRtb2R1bGVDVElDbGllbnQuJG1vZHVsZVN0YXR1cy5oaWRlKCk7XG5cdFx0XHQkKCcuZGlzYWJpbGl0eScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0JCgnLm1lc3NhZ2UuYWpheCcpLnJlbW92ZSgpO1xuXHRcdH1cblx0fSxcblx0LyoqXG5cdCAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINGD0YHRgtCw0L3QvtCy0LrQuCBDYWxsZXJJRCDQuNC3IDHQoVxuXHQgKiDQn9GA0Y/Rh9C10YIg0LjQu9C4INC/0L7QutCw0LfRi9Cy0LDQtdGCINGB0YLQsNGC0YPRgSDRgtGA0LDQvdGB0LvQuNGC0LXRgNCw0YbQuNC4XG5cdCAqL1xuXHRzZXRDYWxsZXJJZFRvZ2dsZSgpIHtcblx0XHRpZiAobW9kdWxlQ1RJQ2xpZW50LiRjYWxsZXJJZFNldHVwVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJykpIHtcblx0XHRcdG1vZHVsZUNUSUNsaWVudC4kY2FsbGVySWRUcmFuc2xpdGVyYXRpb25Ub2dnbGVCbG9jay5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1vZHVsZUNUSUNsaWVudC4kY2FsbGVySWRUcmFuc2xpdGVyYXRpb25Ub2dnbGVCbG9jay5oaWRlKCk7XG5cdFx0fVxuXHR9LFxuXHQvKipcblx0ICog0JLQutC70Y7Rh9C10L3QuNC1INGA0LXQttC40LzQsCDRgNCw0LHQvtGC0Ysg0YfQtdGA0LXQtyBXU1xuXHQgKi9cblx0ZW5hYmxlV3NGaWVsZHMoKSB7XG5cdFx0bW9kdWxlQ1RJQ2xpZW50LiR3c09ubHlGaWVsZHMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdH0sXG5cdC8qKlxuXHQgKiDQktGL0LrQu9GO0YfQtdC90LjQtSDRgNC10LbQuNC80LAg0YDQsNCx0L7RgtGLINGH0LXRgNC10LcgV1Ncblx0ICovXG5cdGRpc2FibGVXc0ZpZWxkcygpIHtcblx0XHRtb2R1bGVDVElDbGllbnQuJHdzT25seUZpZWxkcy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0fSxcblx0LyoqXG5cdCAqINCf0YDQuCDQuNC30LzQtdC90LXQvdC40LggU1NMINGA0LXQttC40LzQsFxuXHQgKiBAcGFyYW0gdmFsdWVcblx0ICogQHBhcmFtIHRleHRcblx0ICogQHBhcmFtICRjaG9pY2Vcblx0ICovXG5cdGNiU3NsTW9kZU9uQ2hhbmdlKHZhbHVlLCB0ZXh0LCAkY2hvaWNlKXtcblx0XHRjb25zdCBwb3J0ID0gbW9kdWxlQ1RJQ2xpZW50LiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsJ3NlcnZlcjFjcG9ydCcpO1xuXHRcdGlmICh2YWx1ZT09PSdodHRwJyAmJiBwb3J0PT09JzQ0Mycpe1xuXHRcdFx0bW9kdWxlQ1RJQ2xpZW50LiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsJ3NlcnZlcjFjcG9ydCcsIDgwKTtcblx0XHR9XG5cdFx0aWYgKHZhbHVlPT09J2h0dHBzJyAmJiBwb3J0PT09JzgwJyl7XG5cdFx0XHRtb2R1bGVDVElDbGllbnQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywnc2VydmVyMWNwb3J0JywgNDQzKTtcblx0XHR9XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHRyZXN1bHQuZGF0YSA9IG1vZHVsZUNUSUNsaWVudC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Y2JBZnRlclNlbmRGb3JtKCkge1xuXHRcdG1vZHVsZUNUSUNsaWVudC5pbml0aWFsaXplKCk7XG5cdH0sXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBtb2R1bGVDVElDbGllbnQuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW1vZHVsZS1jLXQtaS1jbGllbnQvc2F2ZWA7XG5cdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzID0gbW9kdWxlQ1RJQ2xpZW50LnZhbGlkYXRlUnVsZXM7XG5cdFx0Rm9ybS5jYkJlZm9yZVNlbmRGb3JtID0gbW9kdWxlQ1RJQ2xpZW50LmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gPSBtb2R1bGVDVElDbGllbnQuY2JBZnRlclNlbmRGb3JtO1xuXHRcdEZvcm0uaW5pdGlhbGl6ZSgpO1xuXHR9LFxufTtcblxuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuZW1wdHlDdXN0b21SdWxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdGlmIChtb2R1bGVDVElDbGllbnQuJGF1dG9TZXR0aW5nc1RvZ2dsZS5jaGVja2JveCgnaXMgdW5jaGVja2VkJylcblx0XHQmJiBtb2R1bGVDVElDbGllbnQuJHdzVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJylcblx0XHQmJiB2YWx1ZSA9PT0gJycpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59O1xuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMud3JvbmdQb3J0Q3VzdG9tUnVsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRpZiAobW9kdWxlQ1RJQ2xpZW50LiRhdXRvU2V0dGluZ3NUb2dnbGUuY2hlY2tib3goJ2lzIHVuY2hlY2tlZCcpXG5cdFx0JiYgbW9kdWxlQ1RJQ2xpZW50LiR3c1RvZ2dsZS5jaGVja2JveCgnaXMgY2hlY2tlZCcpXG5cdCkge1xuXHRcdHJldHVybiAkLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuaW50ZWdlcih2YWx1ZSwgJzEuLjY1NTM1Jyk7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cdG1vZHVsZUNUSUNsaWVudC5pbml0aWFsaXplKCk7XG59KTtcblxuIl19